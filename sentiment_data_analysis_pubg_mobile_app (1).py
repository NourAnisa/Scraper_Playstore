# -*- coding: utf-8 -*-
"""Sentiment_Data_Analysis_PUBG_Mobile_App.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1YyNOpJAukfXGAxUxF7mhVmqi3MZ9eIn_

**Sentimen Analisis Aplikasi PUBG Mobile di play store**
"""

!pip install google-play-scraper

from google_play_scraper import Sort, reviews
from google_play_scraper import app
import pandas as pd
import numpy as np

"""![Screenshot 2024-05-15 195617.png](data:image/png;base64,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)"""

result, continuation_token = reviews(
    'com.tencent.ig',
    lang='id', #bahasa
    country='id', #negara
    sort=Sort.MOST_RELEVANT, #sorting yang paling relevan
    count=1000, #jumlah dataset
    filter_score_with= None
)

# Dataframe dengan nama
data = pd.DataFrame(np.array(result),columns=['review'])
data = data.join(pd.DataFrame(data.pop('review').tolist()))
data.head()

# @title score

from matplotlib import pyplot as plt
data['score'].plot(kind='hist', bins=20, title='score')
plt.gca().spines[['top', 'right',]].set_visible(False)

len(data)

data = data[['content','score']]
data.head()

data = data.rename(columns={'content': 'komentar','score': 'value'}) #mengganti nama fitur
data.head()

data.to_csv("komentar pubgm 1000 Data.csv", index = False , encoding='utf-8')

dataPubgm = pd.read_csv('/content/komentar pubgm 1000 Data.csv')
dataPubgm.head()

"""SCRAPING DATA"""

df = pd.read_csv('/content/komentar pubgm 1000 Data.csv')

df.head(10)

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import nltk
from nltk.corpus import stopwords
from nltk.tokenize import word_tokenize
from wordcloud import WordCloud

data = pd.read_csv('/content/komentar pubgm 1000 Data.csv')

data.head()

# menghilangkan baris yang memiliki nilai null/kosong
data = data.dropna()

# menghilangkan tanda baca dan karakter khusus
data['clean_text'] = data['komentar'].str.replace('[^\w\s]', '')

# mengubah teks menjadi huruf kecil
data['clean_text'] = data['clean_text'].str.lower()

# menghilangkan stop words (kata umum yang tidak memberikan informasi tambahan)
nltk.download('stopwords')
stop_words = set(stopwords.words('english'))
data['clean_text'] = data['clean_text'].apply(lambda x: ' '.join([word for word in x.split() if word not in (stop_words)]))

# menggabungkan semua komentar menjadi satu teks
all_text = ' '.join(data['clean_text'])

# membuat word cloud
wordcloud = WordCloud(width=1000, height=500, max_font_size=150, random_state=42).generate(all_text)

# menampilkan Word Cloud
plt.figure(figsize=(10, 6))
plt.imshow(wordcloud, interpolation="bilinear")
plt.axis("off")
plt.show()

import nltk
from nltk.corpus import stopwords

nltk.download('stopwords')

stop_words = set(stopwords.words('indonesian'))
stop_words.update(['dan', 'yang', 'lalu', 'yg', 'gk', 'saya', 'lagi'])

data['clean_text'] = data['komentar'].str.replace('[^\w\s]', '')
data['clean_text'] = data['clean_text'].str.lower()
data['clean_text'] = data['clean_text'].apply(lambda x: ' '.join([word for word in x.split() if word not in (stop_words)]))

all_text = ' '.join(data['clean_text'])

wordcloud = WordCloud(width=1000, height=500, max_font_size=150, random_state=42).generate(all_text)

plt.figure(figsize=(10, 6))
plt.imshow(wordcloud, interpolation="bilinear")
plt.axis("off")
plt.show()

"""Melakukan Sentimental Analisis"""

import nltk
nltk.download('vader_lexicon')

from nltk.sentiment import SentimentIntensityAnalyzer

# menginisialisasi SentimentIntensityAnalyzer
sia = SentimentIntensityAnalyzer()

# menghitung snetimen untuk setiap komentar
data['sentiment'] = data['clean_text'].apply(lambda x: sia.polarity_scores(x)['compound'])

# melabeli sentimen (misal 'positif' , 'negatif' , 'netral') berdasarkan nilai sentimen
data['sentiment_label'] = data['sentiment'].apply(lambda x: 'positif' if x > 0 else ('negatif' if x < 0 else 'netral'))

# menampilkan beberapa komentar dan sentimen terkait
data[['komentar', 'sentiment_label']].head(10)

from matplotlib import pyplot as plt
import seaborn as sns
_df_0.groupby('sentiment_label').size().plot(kind='barh', color=sns.palettes.mpl_palette('Dark2'))
plt.gca().spines[['top', 'right',]].set_visible(False)

data.to_csv("/content//hasil komentar pubgm 1000 Data.csv", index = False , encoding='utf-8')